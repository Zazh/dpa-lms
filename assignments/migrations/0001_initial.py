# Generated by Django 5.2.5 on 2025-11-06 12:12

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('content', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AssignmentLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('instructions', models.TextField(help_text='–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è', verbose_name='–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏')),
                ('require_text', models.BooleanField(default=True, verbose_name='–¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç')),
                ('require_file', models.BooleanField(default=False, verbose_name='–¢—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∞–π–ª')),
                ('max_score', models.PositiveIntegerField(default=100, validators=[django.core.validators.MinValueValidator(1)], verbose_name='–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª')),
                ('deadline_days', models.PositiveIntegerField(default=7, help_text='–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —É—Ä–æ–∫–∞', verbose_name='–î–µ–¥–ª–∞–π–Ω (–¥–Ω–∏)')),
                ('allow_late_submission', models.BooleanField(default=True, verbose_name='–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–¥–∞—á—É –ø–æ—Å–ª–µ –¥–µ–¥–ª–∞–π–Ω–∞')),
                ('allow_resubmission', models.BooleanField(default=True, help_text='–°—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–¥–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ—Å–ª–µ "–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞"', verbose_name='–†–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ—Å–¥–∞—á—É')),
                ('lesson', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='assignmentlesson', to='content.lesson', verbose_name='–£—Ä–æ–∫')),
            ],
            options={
                'verbose_name': '–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ',
                'verbose_name_plural': '–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è',
            },
        ),
        migrations.CreateModel(
            name='AssignmentSubmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('submission_number', models.PositiveIntegerField(default=1, verbose_name='–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏')),
                ('submission_text', models.TextField(blank=True, verbose_name='–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞')),
                ('submission_file', models.FileField(blank=True, null=True, upload_to='assignment_submissions/%Y/%m/', verbose_name='–§–∞–π–ª')),
                ('status', models.CharField(choices=[('waiting', '‚è≥ –û–∂–∏–¥–∞–µ—Ç —Å–¥–∞—á–∏'), ('in_review', 'üîç –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ'), ('needs_revision', '‚úèÔ∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞'), ('failed', '‚ùå –ù–µ –∑–∞—á—Ç–µ–Ω–æ'), ('passed', '‚úÖ –ó–∞—á—Ç–µ–Ω–æ')], db_index=True, default='in_review', max_length=20, verbose_name='–°—Ç–∞—Ç—É—Å')),
                ('score', models.PositiveIntegerField(blank=True, help_text='–ë–∞–ª–ª –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è', null=True, verbose_name='–ë–∞–ª–ª')),
                ('feedback', models.TextField(blank=True, verbose_name='–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è')),
                ('submitted_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='–î–∞—Ç–∞ —Å–¥–∞—á–∏')),
                ('reviewed_at', models.DateTimeField(blank=True, null=True, verbose_name='–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏')),
                ('assignment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submissions', to='assignments.assignmentlesson', verbose_name='–ó–∞–¥–∞–Ω–∏–µ')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_assignments', to=settings.AUTH_USER_MODEL, verbose_name='–ü—Ä–æ–≤–µ—Ä–∏–ª')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignment_submissions', to=settings.AUTH_USER_MODEL, verbose_name='–°—Ç—É–¥–µ–Ω—Ç')),
            ],
            options={
                'verbose_name': '–°–¥–∞—á–∞ –∑–∞–¥–∞–Ω–∏—è',
                'verbose_name_plural': '–°–¥–∞—á–∏ –∑–∞–¥–∞–Ω–∏–π',
                'ordering': ['-submitted_at'],
            },
        ),
        migrations.CreateModel(
            name='AssignmentComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('message', models.TextField(verbose_name='–°–æ–æ–±—â–µ–Ω–∏–µ')),
                ('is_instructor', models.BooleanField(db_index=True, default=False, verbose_name='–û—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è')),
                ('is_read', models.BooleanField(default=False, verbose_name='–ü—Ä–æ—á–∏—Ç–∞–Ω–æ')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='–°–æ–∑–¥–∞–Ω')),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignment_comments', to=settings.AUTH_USER_MODEL, verbose_name='–ê–≤—Ç–æ—Ä')),
                ('submission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='assignments.assignmentsubmission', verbose_name='–°–¥–∞—á–∞')),
            ],
            options={
                'verbose_name': '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π',
                'verbose_name_plural': '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏',
                'ordering': ['created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='assignmentsubmission',
            index=models.Index(fields=['user', 'assignment', '-submitted_at'], name='assignments_user_id_238dee_idx'),
        ),
        migrations.AddIndex(
            model_name='assignmentsubmission',
            index=models.Index(fields=['status', '-submitted_at'], name='assignments_status_bf3e6d_idx'),
        ),
        migrations.AddIndex(
            model_name='assignmentsubmission',
            index=models.Index(fields=['assignment', 'status'], name='assignments_assignm_bbafe4_idx'),
        ),
        migrations.AddIndex(
            model_name='assignmentcomment',
            index=models.Index(fields=['submission', 'created_at'], name='assignments_submiss_3772c3_idx'),
        ),
    ]
