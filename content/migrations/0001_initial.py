# Generated by Django 5.2.5 on 2025-11-06 11:21

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Lesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('lesson_type', models.CharField(choices=[('video', 'üìπ –í–∏–¥–µ–æ'), ('text', 'üìÑ –¢–µ–∫—Å—Ç'), ('quiz', '‚ùì –¢–µ—Å—Ç'), ('assignment', 'üìù –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ')], db_index=True, max_length=20, verbose_name='–¢–∏–ø —É—Ä–æ–∫–∞')),
                ('title', models.CharField(max_length=255, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞')),
                ('description', models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞')),
                ('order', models.PositiveIntegerField(db_index=True, default=0, verbose_name='–ü–æ—Ä—è–¥–æ–∫')),
                ('access_delay_hours', models.PositiveIntegerField(default=0, help_text='–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Ä–æ–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —ç—Ç–æ—Ç', verbose_name='–ó–∞–¥–µ—Ä–∂–∫–∞ –¥–æ—Å—Ç—É–ø–∞ (—á–∞—Å—ã)')),
                ('requires_previous_completion', models.BooleanField(default=True, verbose_name='–¢—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Ä–æ–∫–∞')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–°–æ–∑–¥–∞–Ω')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–û–±–Ω–æ–≤–ª–µ–Ω')),
            ],
            options={
                'verbose_name': '–£—Ä–æ–∫',
                'verbose_name_plural': '–£—Ä–æ–∫–∏',
                'ordering': ['module', 'order'],
            },
        ),
        migrations.CreateModel(
            name='Course',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞')),
                ('label', models.CharField(blank=True, help_text='–ù–∞–ø—Ä–∏–º–µ—Ä: "–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å"', max_length=100, verbose_name='–ú–µ—Ç–∫–∞ –∫—É—Ä—Å–∞')),
                ('duration', models.CharField(blank=True, help_text='–ù–∞–ø—Ä–∏–º–µ—Ä: "3 –º–µ—Å—è—Ü–∞"', max_length=100, verbose_name='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å')),
                ('description', models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞')),
                ('is_active', models.BooleanField(db_index=True, default=True, verbose_name='–ê–∫—Ç–∏–≤–µ–Ω')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–°–æ–∑–¥–∞–Ω')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–û–±–Ω–æ–≤–ª–µ–Ω')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_courses', to=settings.AUTH_USER_MODEL, verbose_name='–°–æ–∑–¥–∞–ª')),
            ],
            options={
                'verbose_name': '–ö—É—Ä—Å',
                'verbose_name_plural': '–ö—É—Ä—Å—ã',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LessonMaterial',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞')),
                ('description', models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ')),
                ('file', models.FileField(blank=True, null=True, upload_to='lesson_materials/%Y/%m/', verbose_name='–§–∞–π–ª')),
                ('url', models.URLField(blank=True, help_text='–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª', verbose_name='–°—Å—ã–ª–∫–∞')),
                ('order', models.PositiveIntegerField(default=0, verbose_name='–ü–æ—Ä—è–¥–æ–∫')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–°–æ–∑–¥–∞–Ω')),
                ('lesson', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='materials', to='content.lesson', verbose_name='–£—Ä–æ–∫')),
            ],
            options={
                'verbose_name': '–ú–∞—Ç–µ—Ä–∏–∞–ª –∫ —É—Ä–æ–∫—É',
                'verbose_name_plural': '–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∫ —É—Ä–æ–∫—É',
                'ordering': ['lesson', 'order'],
            },
        ),
        migrations.CreateModel(
            name='Module',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è')),
                ('description', models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è')),
                ('order', models.PositiveIntegerField(db_index=True, default=0, verbose_name='–ü–æ—Ä—è–¥–æ–∫')),
                ('requires_previous_module', models.BooleanField(default=True, help_text='–°—Ç—É–¥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–æ–¥—É–ª—å', verbose_name='–¢—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–æ–¥—É–ª—è')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–°–æ–∑–¥–∞–Ω')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–û–±–Ω–æ–≤–ª–µ–Ω')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='modules', to='content.course', verbose_name='–ö—É—Ä—Å')),
            ],
            options={
                'verbose_name': '–ú–æ–¥—É–ª—å',
                'verbose_name_plural': '–ú–æ–¥—É–ª–∏',
                'ordering': ['course', 'order'],
            },
        ),
        migrations.AddField(
            model_name='lesson',
            name='module',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lessons', to='content.module', verbose_name='–ú–æ–¥—É–ª—å'),
        ),
        migrations.CreateModel(
            name='TextLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField(verbose_name='–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–∫–∞')),
                ('estimated_reading_time', models.PositiveIntegerField(default=5, help_text='–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ —á—Ç–µ–Ω–∏–µ', validators=[django.core.validators.MinValueValidator(1)], verbose_name='–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è (–º–∏–Ω—É—Ç—ã)')),
                ('lesson', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='textlesson', to='content.lesson', verbose_name='–£—Ä–æ–∫')),
            ],
            options={
                'verbose_name': '–¢–µ–∫—Å—Ç–æ–≤—ã–π —É—Ä–æ–∫',
                'verbose_name_plural': '–¢–µ–∫—Å—Ç–æ–≤—ã–µ —É—Ä–æ–∫–∏',
            },
        ),
        migrations.CreateModel(
            name='VideoLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vimeo_video_id', models.CharField(help_text='–ù–∞–ø—Ä–∏–º–µ—Ä: 123456789', max_length=100, verbose_name='ID –≤–∏–¥–µ–æ Vimeo')),
                ('video_duration', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ (—Å–µ–∫—É–Ω–¥—ã)')),
                ('completion_threshold', models.PositiveIntegerField(default=90, help_text='–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(100)], verbose_name='–ü–æ—Ä–æ–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (%)')),
                ('timecodes', models.JSONField(blank=True, default=list, help_text='–°–ø–∏—Å–æ–∫ —Ç–∞–π–º–∫–æ–¥–æ–≤: [{"time": 120, "label": "–í–≤–µ–¥–µ–Ω–∏–µ"}]', verbose_name='–¢–∞–π–º–∫–æ–¥—ã')),
                ('lesson', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='videolesson', to='content.lesson', verbose_name='–£—Ä–æ–∫')),
            ],
            options={
                'verbose_name': '–í–∏–¥–µ–æ-—É—Ä–æ–∫',
                'verbose_name_plural': '–í–∏–¥–µ–æ-—É—Ä–æ–∫–∏',
            },
        ),
        migrations.AddIndex(
            model_name='course',
            index=models.Index(fields=['is_active', '-created_at'], name='content_cou_is_acti_e63183_idx'),
        ),
        migrations.AddIndex(
            model_name='module',
            index=models.Index(fields=['course', 'order'], name='content_mod_course__07037a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='module',
            unique_together={('course', 'order')},
        ),
        migrations.AddIndex(
            model_name='lesson',
            index=models.Index(fields=['module', 'order'], name='content_les_module__c210ff_idx'),
        ),
        migrations.AddIndex(
            model_name='lesson',
            index=models.Index(fields=['lesson_type'], name='content_les_lesson__2f0b53_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='lesson',
            unique_together={('module', 'order')},
        ),
    ]
